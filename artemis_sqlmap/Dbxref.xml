<?xml version="1.0" encoding="UTF-8" ?> 
 
<!DOCTYPE sqlMap 
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd"> 
 

<sqlMap namespace="Dbxref"> 
 
  <select id="getDbxref" parameterClass="uk.ac.sanger.artemis.chado.ChadoFeature"
                             resultClass="uk.ac.sanger.artemis.chado.Dbxref">
   	SELECT  
	  db.name,
	  dbx.accession
 	FROM $schema$.feature_dbxref dbx_f 
        LEFT JOIN dbxref dbx ON dbx.dbxref_id=dbx_f.dbxref_id
        LEFT JOIN db ON db.db_id=dbx.db_id 
        LEFT $schema$.feature f ON JOIN dbx_f.feature_id=f.feature_id
        <isNotNull property="uniquename"> 
          WHERE f.uniquename=#uniquename#
        </isNotNull>
        <isNotNull property="id">
          WHERE dbx_f.feature_id=$id$
        </isNotNull>
        ORDER BY f.type_id,  uniquename
  </select> 

</sqlMap> 
